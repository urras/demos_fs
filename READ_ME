

	     1. НАСТРОЙКА ОПЕРАЦИОННОЙ СИСТЕМЫ ДЕМОС
		====================================

	В разделе описываются процедуры, которые необходимо вы-
   полнять, как при первичной установке системы, так и в случае
   "полного разрушения" корневой файловой  системы  или  замены
   жесткого  диска; описывается корневая файловая система и не-
   которые справочники.

	Процесс подготовки системы к эксплуатации можно  разде-
   лить на следующие этапы:
	- первичная установка (или  восстановление)  системы  с
   дистрибутивного набора гибких магнитных дисков (ГМД);
	- загрузка системы и проверка ее целостности;
	- настройка системных файлов.
	При "частичном разрушении" файловых  систем  рекоменду-
   ется  попытаться восстановить их целостность программой fsck
   (см. приложение 2).

	1.1. Первичная установка системы
	     ===========================
	Для первичной установки системы необходимо:
	- тумблером "СЕТЬ" включить ПЭВМ;
	- вставить дискету с номером 0  (стартовую  дискету)  в
   верхнее устройство (нулевое);
	- получив приглашение "@", нажать клавишу <B>, и  затем
   в ответ на приглашение "$" (доллар) ввести "MY0" (или "MY" и
   нажать клавишу <ВК>);
	- через некоторое время на экран будет выдано приглаше-
   ние  "BOOT:...";  в  ответ на него необходимо нажать клавишу
   <ВК>;
	- на запрос "установка ДЕМОС требует стирания  информа-
   ции на жестком диске..." необходимо ответить "Y" (YES) и на-
   жать клавишу <ВК>; отменить неправильно введенный символ (до
   нажатия клавиши <ВК>) можно при помощи клавиши <ЗБ>;
	- на запрос "Введите  время..."  необходимо  ввести  10
   цифр  и  нажать клавишу <ВК>; время задается следующим обра-
   зом:
	ггммддччмм,
   где  гг - две последние цифры номера года (например, 90);
	мм - номер месяца (от 01 до 12);
	дд - номер дня в месяце;
	чч - час (от 00 до 23);
	мм - минуты (от 00 до 59);
	- на запрос "Емкость накопителя  на  жестком  диске..."
   необходимо  ввести  цифру  -  номер типа накопителя и нажать
   клавишу <ВК>; тип накопителя задается следующим образом:

  1.  5 Мб  153 цилиндра  /0-152/ - установка СУБД "РУБИН" невозможна
  2. 10 Мб  306 цилиндров /0-305/ - установка СУБД "РУБИН" невозможна
  3. 10 Мб  306 цилиндров /0-305/ - установка СУБД "РУБИН" возможна
  4. 20 Мб  612 цилиндров /0-611/ - установка СУБД "РУБИН" возможна

	- далее на запрос "Форматировать жесткий диск?" необ-
   ходимо ввести "Y", если требуется отформатировать диск, либо
   ввести "N", если не требуется;
	- после загрузки минисистемы на жесткий диск будет  вы-
   дано  сообщение о необходимости ее перевызова с этого диска;
   через некоторое время будет выдано приглашение "@";
	- в ответ на это приглашение необходимо набрать "B",  а
   затем  в ответ на приглашение "$" (доллар) ввести "DW0" (или
   "DW" и нажать клавишу <ВК>);
  - через некоторое время на экран будет выдано приглаше-
	ние  "BOOT:...";  в  ответ на него необходимо нажать клавишу
	<ВК>;
  - после того, как система будет вызвана, она запросит дискету N1 из
	базового набора; ее необходимо вставить в любой накопитель
	на гибких  дисках, ввести номер накопителя и нажать
	клавишу <ВК>;
  - после считывания дискеты система запросит  следующую;
	необходимо вынуть дискету с номером 1 из накопителя
	и вставить дискету с номером 2, затем с номером 3 и
	так далее;
  - после того, как будут прочитаны все дискеты  базового
	набора, система автоматически перезагрузится и проверит фай-
	ловую систему на жестком диске  (при  этом  может  произойти
	повторная перезагрузка);
  - после перезагрузки система выдаст приглашение "Имя:";
	необходимо  ввести имя суперпользователя root для выполнения
	административных функций в системе ДЕМОС.

  Если вход в систему выполнен первый раз после  первона-
	чальной  установки системы или полного восстановления, необ-
	ходимо проделать следующее:
  - установить  пароль  для  пользователя  root  командой
	passwd;
  - продублировать дистрибутивный набор ГМД.

  Для копирования дискет можно использовать команду  cpfd
	(см. 4.6.2).
  Перед выключением ПЭВМ  пользователь  должен  выполнить
	команду:
  /etc/reboot -h ( Обязательно !!! )

  На дискетах дистрибутивного набора должны быть наклеены
	маркеры  защиты записи. Это необходимо для того, чтобы из-за
	неисправности аппаратуры или неосторожного использования  не
	разрушить информацию на дискетах.
	Во время загрузки с дискеты с номером 0, она
	должна быть без маркера.

  1.2. Загрузка и проверка целостности системы
       =======================================
  Для загрузки операционной системы ДЕМОС необходимо:
  - включить питание ПЭВМ;
  - получив приглашение "@", нажать клавишу <B>, и  затем
	в ответ на приглашение "$" (доллар) ввести "DW0" (или "DW" и
	нажать клавишу <ВК>);
  - через некоторое время на экран будет выдано приглаше-
	ние  "BOOT:...";  в  ответ на него необходимо нажать клавишу
	<ВК>;
  - на запрос "Введите время ..."  необходимо  ввести  10
	цифр и нажать клавишу <ВК>;
  - далее на запрос "Проверять файловые системы?" необхо-
	димо  нажать клавишу <ВК> (если требуется проверять файловые
	системы) или ввести "N" и нажать клавишу <ВК> (если не  тре-
	буется проверять файловые системы);
  - после проверки файловых систем будет выдано приглаше-
	ние  "Имя:"; необходимо ввести имя, под которым пользователь
	зарегистрирован в системе; после его обработки  осуществится
	вход в систему.

	П р и м е ч а н и е. Во время проверки файловых  систем
   может произойти повторная перезагрузка.

	Если в ответ на запрос "Имя:" ввести "user",  то  прои-
   зойдет  вход  в  систему ПРАКТИКА (описание системы ПРАКТИКА
   см. разд.3 "Справочного руководства").

	После завершения работы в системе необходимо на пригла-
   шение для ввода команд набрать "/etc/reboot -h"; после того,
   как система ответит "SYNCING DISKS ... DONE",  можно  выклю-
   чить питание ПЭВМ.


       2. РАСШИРЕННЫЕ ВОЗМОЖНОСТИ ОС ДЕМОС ВЕРСИИ 3.0
	  ===========================================
  1.
      Генерация ядра demos содержит следущие изменения в
  сторону повышенной оптимальности и эффективности работы ядра:

      a). Создан новый, максимально быстрый и очень расторопный
	  в работе драйвер жесткого диска типа "Винчестер", ре-
	  жимы  работы которого настраиваются программой rwset.

      b). Откорректирован и оптимизирован драйвер гибкого
	  диска.

      c). Создан новый суперуниверсальный драйвер принтера,
	  поддерживающий работу печатающих устройств типа:
	  EPSON FX-800, EPSON LX-800, СМ 6302, DZM-180, СМ 6315,
	  СМ 6900, ROBOTRON СМ 6329, D100, D100M, и т.д.
	  в полном объеме их функциональных возможностей
	  и с учетом ошибок в ПЗУ EPSON FX-800. Режимы работы
	  драйвера настраивается программой lpset.
	  Подробнее см. файл READ_LP в корневом каталоге.

      d). Данная версия ядра поддерживает работу контроллера КЦГД
	  как с ПЗУ КР18101РЕ2-181 на плате КЦГД, так и с ПЗУ
	  КР18101РЕ2-182, работающей в 8-битном символьном режиме.
	  (Следует заметить, что ядро версии 2.0 не способно рабо-
	  тать с КЦГД на ПЗУ КР18101РЕ2-182). Однако, поставляемый
	  графический протокол /etc/graf,загружаемый в ОЗУ КЦГД
	  и разработанный для ПЗУ КР18101РЕ2-181, не будет за-
	  гружаться при ПЗУ КР18101РЕ2-182. В настоящее время
	  разрабатывается новый графический протокол для
	  последней ПЗУ.

	  В целях экономии памяти изменены параметры
	  конфигурации ядра:

      e). Количество буферов ввода/вывода.

      f). Количество процессов в системе.

      g). Количество одновременно исполняемых программ.

      h). Количество описателей файлов.

      i). Количество одновременно открытых файлов.

      j). "Зажата" статистика по буферам ввода/вывода, по под-
	  качке, по загрузке системы, по командам.

      k). Уменьшено количество оверлеев ядра demos.

      l). И другие мелочи...

  2.
      Устранены ошибки в загрузчике boot, что позволило
  работать на разных типах жестких дисков.

  3.
      Устранены ошибки в промежуточных загрузчиках
  rwuboot, fduboot.

  4.
      Новая версия 4.1 полиэкранного редактора red
  содержит следующие изменения и дополнения:

      a). <ПФ1><i><ВК> установка/сброс режима вставки.

      b). <ПФ1><b><ВК> установка режима 132 символа на экране.

      c). <ПФ1><l><ВК> установка режима 80 символов на экране.

      d). <ПФ1><g><ВК> установка режима прорисовки символов
	  псевдографики. С помощью клавиш <Ф4>,<Ф5>,<Ф6>,<Ф8>
	  можно "рисовать" и "стирать" вертикальные и горизон-
	  тальные сплошные линии.

      e). <ПФ1><Ф0> установка/сброс режима рисования/стирания псевдографики.

      f). <ПФ1><n><ВК> выход из режима псевдографики.

      g). <Ф1>   перемещение курсора по словам вперед.

      h). <ПФ4> перемещение курсора по концам строк.

      i). <Ф5>   удаление слова справа от курсора.

      j). <ПФ1><Ф2><стрелка вправо> перемещение курсора
	  в правую крайнюю позицию текущего окна.

      k). <ПФ1><Ф2><стрелка влево> перемещение курсора
	  в левую крайнюю позицию текущего окна.

      l). <ПФ1><Ф2><стрелка вверх> перемещение курсора
	  в верхнюю крайнюю позицию текущего окна.

      m). <ПФ1><Ф2><стрелка вниз> перемещение курсора
	  в нижнюю крайнюю позицию текущего окна.

      n). <ПФ1><восьмеричное число><Ф2><Ф0> ввод спец. символов,
	   где число состоит из трех цифр.

      о). Оптимизирован вывод информации на экран при
	  использовании клавиш <Ф7>, <ПФ1><Ф7>, <Ф2><Ф7>, <ПФ1><Ф2><Ф7>

      p). Отменено действие клавиши <Ф.>, как табуляции назад

  5.
      Откорректирована программа graf (файл etc/graf).
      Графический протокол теперь можно загружать как
      в режиме совместимости ( VT52 ), так и в расширен-
      ном режиме ( VT100 ) дисплея.В файл etc/termcap вклю-
      чена esc-последовательность установки зоны рулона со 2
      по 22 строки экрана, что улучшает наглядность ра-
      боты редактора red и другие незначительные изменения.

  6.
      Сделана удобная начальная установка ОС ДЕМОС на жесткий диск
      (см. выше п.1) с учетом разных их типов и СУБД "РУБИН".

  7.
      Внесены небольшие изменения в стартовый файл etc/rc
      ( связанные с программами fsck, mount ).

  8.
      Графическая библиотека libgraph.a находится в
  каталоге usr/lib и является функциональным аналогом графи-
  ческой библиотеки фирмы "Borland International". В файле
  READ_GRAF содержится описание графических функций.


		    *  *  *  *  *

  9.
      Программа opint определяет оптимальный интерливинг по сек-
  торам,поверхностям,цилиндрам и форматирует винчестер.Контроль-
  ное тестирование после форматирования винчестера с оптимальным
  интерливингом показало,что эффективность работы с винчестером
  возросла в среднем на 25-30%.Программа opint должна запускаться
  с дискетты ( ОС загружается при этом также с дискетты под номе-
  ром 0 ).Программа opint имеет следущие ключи:

  Usage: opint {-i[N] | -f [-q] [-bN] [-lN] [-sN] [-cN]} [-r]

 -i[N]  вычислить оптимальный фактор интерливинга по
	секторам/поверхностям/ и по цилиндрам. N-номер
	рабочего цилиндра, используется также цилиндр N-1
	( по умолчанию N==152 )

    -f  форматировать винчестер

    -r  не сохранять информацию на винчестере (на нефор-
	матированном винчестере этот ключ обязателен !!!)

    -q  без вопросов

   -bN  установить начало форматирования с N-го цилиндра
	включительно (по умолчанию с цилиндра N==0),
	этот цилиндр (а также предыдущий) используется в
	качестве рабочего для поиска оптимального интерли-
	винга, если используется ключ -b0 или таковой отсут-
	ствует вообще, то рабочим становится 152 цилиндр.

   -lN  установить конец форматирования до N-го цилиндра
	включительно (по умолчанию до цилиндра N==152)

   -sN  установить фактор интерливинга N по секторам/по-
	верхностям/ (по умолчанию N==оптимальный)

   -cN  установить фактор интерливинга N по цилиндрам
	(по умолчанию N==оптимальный)

  10.
      Программа rwset служит для настройки режимов работы
  драйвера жесткого диска и имеет ключи:

	Usage: rwset [-cN] [[-]w]
	-cN - включить предкомпенсацию с N-го цилиндра
	 w - включить проверку записи
	-w - выключить проверку записи

  11.
      Программа lpset служит для настройки режимов работы
  драйвера печатающего устройства. Вся инфорамация по печати
  содержится в файле READ_LP.

		    * * * * * * *

       3. ОПЕРАЦИОННАЯ СИСТЕМА ДЕМОС/306
	  ==============================

  Операционная система ДЕМОС/306 предназначена для установки и
  функционирования на одном жестком диске ("Винчестер", 20Мб) с
  операционной системой RT-11. Жесткий диск емкостью 20Мб
  между двумя ОС распределяется следующим образом :

	 RT-11 : с   0 по 305 цилиндр (10Мб)
	 ДЕМОС : с 306 по 611 цилиндр (10Мб)

  Первоначально (по включению питания) происходит загрузка ОС RT-11,
  причем драйвер жесткого диска должен быть настроен на работу с
  10 Мб дискового пространства (по 305 цилиндр включительно).
  После загрузки RT-11 ОС ДЕМОС/306 вызывается командой DEMOS.

  Начальная  установка ОС ДЕМОС/306 от установки ОС ДЕМОС отличается
  всего лишь одной установочной дискетой N0; остальные пять дискет
  дистрибутива N1-N5 идентичны для обеих ОС.

	  Пользователь, уставший от двухколесного самоката RT-11
	  нажатием пяти клавиш пересаживается в стратегический
	  бомбардировщик DEMOS/306 !

	  ОС ДЕМОС/306 - ЭТО ПРОРЫВ В БУДУЩЕЕ !
	  ОС ДЕМОС/306 - ЭТО ПРОСТО ФАНТАСТИКА !

  POSTCRYPTUM 1.
  -------------- В каталоге /TEST содержатся контольно-демонстра-
		 ционные задачи и тесты, которые запускаются ко-
		 мандой /TEST/main.

  POSTCRYPTUM 2.
  -------------- В поставляемом дистрибутиве в каталогах bin/,
		 usr/bin/, etc/ содержатся утилиты и файлы
		 (в частности:

		 c7t10    nroff      autoconfig  termcap
		 chgrp    pp         clri        timstat
		 chown    pstat      cron        ttys
		 dump     restor     dostat      utpm
		 dumpdir  rline      getty       wall
		 edit     rmail      graf
		 egrep    setcolor   group
		 false    smbl       group.std
		 fgrep    startcode  init
		 gets     starttext  iostat
		 login    su         lp_daemon
		 lpf      tfd0       mknod
		 lpset    wermit     psdatabase
		 lx       accton     savecore
		 mix      admclean   shutdown

		 и другие...), на которые нет описаний в докумен-
		 тации, т.к. описания на утилиты и файлы, необхо-
		 димые администратору системы или системному програм-
		 мисту и не связанные непосредственно с работой поль-
		 зователя выходят за рамки данной документации, имею-
		 щей цель дать самые необходимые сведения для пользо-
		 вателя. Описания можно найти в различной литературе
		 по ОС UNIX т.к. большинство утилит и служебных
		 файлов имеют общепринятые в семействе ОС UNIX имена.
		 С другой стороны, не все утилиты ( в частности:

		 ardos     from      mkmf      splineg
		 banner    hier      mm        strings
		 blank     hostname  prmail    sum
		 checkobj  ident     rab       unifdef
		 ckdir     indent    rcs       units
		 colcrt    install   rcsdiff   uptime
		 ctags     last      rcsintro  uucpc
		 cxref     lastcomm  rcsmerge  uuxc
		 ddutok    lex       rev       whoami
		 error     lint      rlog      badsect
		 expand    look      script    ncheck
		 fold      merge     spell

		 и другие... ), описанные в документации, содержатся
		 в дистрибутиве, т.к. документация составлялась с
		 учетом дальнейших разработок.

  POSTCRYPTUM 3.
  -------------- В дистрибутив не входят и поставляются
			    отдельнo:

		 a). СУБД "РУБИН"./ с комплектом документации /

		 b). Интегрированная оболочка "Demos Commander" -
		     аналог "Norton Commander".

  POSTCRYPTUM 4.
  -------------- Над версией 3.0 ОС ДЕМОС работали:

			   Юдин К.Е.
			   Судаков А.В.
			   Рыжонков К.С.
			   Брагин Д.Н.

  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  Copyright 1991 by Research Institute "Scientific Centre",
	      lab 462/2. All rights reserved.

		      PHONE:   536-56-42.

  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  МОСКВА, ЗЕЛЕНОГРАД, НИИ "НАУЧНЫЙ ЦЕНТР"(лаб.462/2),

		      ТЕЛЕФОН: 536-56-42.

  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
